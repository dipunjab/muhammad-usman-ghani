<div class="modal-product-container">
  <div class="modal-grid">
    
    <div class="modal-image">
      <img id="MainModalImage" src="{{ product.featured_image | image_url: width: 800 }}" width="800" height=""alt="{{ product.title }}">
    </div>

    <div class="modal-details">
      <h2 class="modal-title">{{ product.title }}</h2>
      <div class="modal-price" id="ModalPrice">{{ product.price | money }}</div>
      
      <div class="modal-description">
        {{ product.description | strip_html | truncatewords: 25 }}
      </div>

      </div>
      {% form 'product', product, id: 'AjaxAddToCartForm' %}
        <input type="hidden" name="id" id="VariantIdInput" value="{{ product.selected_or_first_available_variant.id }}">

        {% for option in product.options_with_values %}
          <div class="option-group">
            <label class="option-label">{{ option.name }}</label>
            
            {% if option.name == 'Color' or option.name == 'Colour' %}
              <div class="color-swatch-wrapper">
                {% for value in option.values %}
                  <label class="swatch-item">
                    <input type="radio" name="options[{{ option.name }}]" value="{{ value | escape }}" class="variant-selector" {% if option.selected_value == value %}checked{% endif %}>
                    <span class="swatch-label">
                      <span class="color-indicator" style="background-color: {{ value | handle }};"></span>
                      {{ value }}
                    </span>
                  </label>
                {% endfor %}
              </div>
            {% else %}
              <div class="custom-select-wrapper" data-custom-dropdown>
                
                <div class="custom-dropdown-trigger">
                  <span class="dropdown-text">Choose {{ option.name }}</span>
                  <img src="{{ 'Vector.png' | asset_url }}" class="dropdown-arrow-icon" alt="▼" width="12" height="12">
                </div>

                <div class="custom-dropdown-options">
                  {% for value in option.values %}
                    <div class="custom-option-item" data-value="{{ value | escape }}">
                      {{ value }}
                    </div>
                  {% endfor %}
                </div>

                <select name="options[{{ option.name }}]" class="variant-selector hidden-native-select" style="display: none;">
                  <option value="" disabled selected>Choose {{ option.name }}</option>
                  {% for value in option.values %}
                    <option value="{{ value | escape }}">{{ value }}</option>
                  {% endfor %}
                </select>
              </div>
            {% endif %}
          </div>
        {% endfor %}

        <button type="submit" class="modal-atc-btn">
          <span>ADD TO CART</span>
          <span class="atc-arrow">→</span>
        </button>
      {% endform %}
  </div>
</div>

{% comment %} Critical for JS logic {% endcomment %}
<script type="application/json" id="ProductJson-{{ product.id }}">
  {{ product | json }}
</script>